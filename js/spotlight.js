var gitblog=function(e){var t=this;t.getUrlParam=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?decodeURI(n[2]):null},t.options={id:null,label:null,q:null,page:1,token:null,code:null,redirect_url:null},t.set=function(){null!=t.getUrlParam("id")&&(t.options.id=parseInt(t.getUrlParam("id"))),null!=t.getUrlParam("label")&&(t.options.label=t.getUrlParam("label")),null!=t.getUrlParam("q")&&(t.options.q=t.getUrlParam("q")),null!=t.getUrlParam("page")&&(t.options.page=parseInt(t.getUrlParam("page"))),null!=t.getUrlParam("access_token")&&(t.options.token=t.getUrlParam("access_token")),null!=t.getUrlParam("code")&&(t.options.code=t.getUrlParam("code")),null!=t.getUrlParam("state")&&(t.options.redirect_url=t.getUrlParam("state")),null!=t.options.code&&null!=t.options.redirect_url&&(window.location.href=e.server_link+"?code="+t.options.code+"&redirect_url="+t.options.redirect_url+"&client_id="+e.client_id+"&client_secret="+e.client_secret)},t.set(),t.utc2localTime=function(e){var t=Date.parse(e),n=new Date(t);return n.getFullYear()+"年"+(n.getMonth()+1)+"月"+n.getDate()+"日"},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"gm"),t)};var n=function(){this.title=e.title,this.instruction=e.instruction};n.prototype.init=function(){$("#title").text(this.title),$("#instruction").text(this.instruction),document.getElementsByTagName("title")[0].innerText=this.title};var i=function(){this.page=1,this.pages=1,this.itemNum=0,this.pageLimit=7};i.prototype={getNum:function(e){var n=this;null!=t.options.page&&null!=t.options.page&&(n.page=t.options.page),$.ajax({type:"get",url:e,success:function(e){null!=t.options.label&&null!=t.options.label?n.itemNum=e.length:null!=t.options.q&&null!=t.options.q?n.itemNum=e.total_count:null!=t.options.id&&null!=t.options.id?(n.itemNum=e.length,document.getElementById("comments-num").innerHTML=n.itemNum):n.itemNum=e.open_issues_count,n.itemNum>10&&(n.pages=Math.ceil(n.itemNum/10),n.show())}})},show:function(){var e=this;if($("#pages").css("display","inline-block"),document.getElementById("pages").innerHTML='<mdui-button class="highlight"><li id="last_page"><a id="last">«</a></li></mdui-button> ',e.pages<=e.pageLimit)for(var n=1;n<=e.pages;n++)document.getElementById("pages").innerHTML+='<mdui-button class="highlight"><li><a id="page'+n+'">'+n+"</a></li></mdui-button> ";else{if(e.page>=5)document.getElementById("pages").innerHTML+='<li><a id="page1" class="highlight">1</a></li>',document.getElementById("pages").innerHTML+='<li><a style="pointer-events: none;" class="highlight">...</a></li>',document.getElementById("pages").innerHTML+='<li><a id="page'+(e.page-1)+'" v>'+(e.page-1)+"</a></li>",document.getElementById("pages").innerHTML+='<li><a id="page'+e.page+'" class="highlight">'+e.page+"</a></li>";else for(n=1;n<=e.page;n++)document.getElementById("pages").innerHTML+='<li><a id="page'+n+'" class="highlight">'+n+"</a></li>";if(e.page<=e.pages-4)document.getElementById("pages").innerHTML+='<li><a id="page'+(e.page+1)+'" class="highlight">'+(e.page+1)+"</a></li>",document.getElementById("pages").innerHTML+='<li><a class="highlight">...</a></li>',document.getElementById("pages").innerHTML+='<li><a id="page'+e.pages+'" class="highlight">'+e.pages+"</a></li>";else for(n=e.page+1;n<=e.pages;n++)document.getElementById("pages").innerHTML+='<li><a id="page'+n+'" class="highlight">'+n+"</a></li>"}document.getElementById("pages").innerHTML+=' <mdui-button class="highlight"><li id="next_page"><a id="next" style="cursor: pointer;">»</a></li></mdui-button>';for(n=1;n<=e.pages;n++)null!=t.options.label?$("#page"+n).click(function(){window.location.href="?label="+t.options.label+"&page="+this.innerHTML}):null!=t.options.id?$("#page"+n).click(function(){window.location.href="?id="+t.options.id+"&page="+this.innerHTML}):null!=t.options.q?$("#page"+n).click(function(){window.location.href="?q="+t.options.q+"&page="+this.innerHTML}):$("#page"+n).click(function(){window.location.href="?page="+this.innerHTML}),n==e.page?$("#page"+n).addClass("active"):$("#page"+n).removeClass("active");1==e.page?($("#last_page").css("pointer-events","none"),$("#next_page").css("pointer-events","auto")):e.page==e.pages&&($("#last_page").css("pointer-events","auto"),$("#next_page").css("pointer-events","none")),document.getElementById("last").onclick=function(){e.last()},document.getElementById("next").onclick=function(){e.next()}},last:function(){this.page--,null!=t.options.label?window.location.href="?label="+t.options.label+"&page="+this.page:null!=t.options.id&&null!=t.options.id?window.location.href="?id="+t.options.id+"&page="+this.page:window.location.href="?page="+this.page},next:function(){this.page++,null!=t.options.label?window.location.href="?label="+t.options.label+"&page="+this.page:null!=t.options.id&&null!=t.options.id?window.location.href="?id="+t.options.id+"&page="+this.page:window.location.href="?page="+this.page}};var s=function(){this.num=0,this.isLike=!1};s.prototype={getNum:function(t,n){var i=this,s="";"issue"==t?s="https://api.github.com/repos/"+e.name+"/"+e.repo+"/issues/"+n+"/reactions":"comment"==t&&(s="https://api.github.com/repos/"+e.name+"/"+e.repo+"/issues/comments/"+n+"/reactions"),$.ajax({type:"get",url:s+"?content=heart",headers:{Accept:"application/vnd.github.squirrel-girl-preview+json"},success:function(e){for(var s in e)e[s].user.login==window.localStorage.name&&(i.isLike=!0);i.num=e.length,i.show(t,n)}})}};var o=function(){this.comments=new Comment,this.page=new i,this.reaction=new s,this.comment_url=""};o.prototype={init:function(){var n=this;null!=t.options.token&&null!=t.options.token&&(window.localStorage.clear(),window.localStorage.setItem("access_token",t.options.token),history.replaceState(null,e.title,"content.html?id="+t.options.id)),$.ajax({type:"get",headers:{Accept:"application/vnd.github.squirrel-girl-preview, application/vnd.github.html+json, application/x-www-form-urlencoded"},url:"https://api.github.com/repos/"+e.name+"/"+e.repo+"/issues/"+t.options.id,success:function(i){document.getElementById("title").innerHTML=i.title,document.getElementsByTagName("title")[0].innerText=i.title+"-"+e.title,i.created_at=t.utc2localTime(i.created_at),document.getElementById("instruction").innerHTML=i.created_at,document.getElementById("content").innerHTML=i.body_html;var s=document.getElementById("labels");for(var o in i.labels)s.innerHTML+='<a href="issue_per_label.html?label='+i.labels[o].name+'"># '+i.labels[o].name+"</a>";s.innerHTML+='<div style="float:right;cursor:pointer" id="'+t.options.id+'"></div>',n.comments.init(),n.reaction.getNum("issue",t.options.id)}})}};var a=function(){this.issue_url="",this.issue_perpage_url="",this.issue_search_url="",this.author="",this.creator="",this.state="",this.page=new i};a.prototype={getTags:function(){$.ajax({type:"get",url:"https://api.github.com/repos/"+e.name+"/"+e.repo+"/labels",success:function(e){for(var t in e)document.getElementById("tags").innerHTML+='<a href="issue_per_label.html?label='+e[t].name+'">'+e[t].name+"</a>"}})},addItem:function(e){for(var n in document.getElementById("issue-list").innerHTML="",e){var i="";for(var s in e[n].labels)i+='<mdui-chip class="highlight montserrat" onclick="#" href=issue_per_label.html?label='+e[n].labels[s].name+">"+e[n].labels[s].name+"</mdui-chip>";e[n].body=e[n].body.replace(/<.*?>/g,""),e[n].created_at=t.utc2localTime(e[n].created_at),document.getElementById("issue-list").innerHTML+='<li><p class="date">'+e[n].created_at+'</p><h3 class="title"><a class="highlight" href="content.html?id='+e[n].number+'">'+e[n].title+'</a></h3><div class="excerpt"><p class="issue">'+e[n].body+"</p></div><li></li>"+i+"</ul></li>"}},show:function(e){var n=this;$.ajax({type:"get",url:e+"page="+t.options.page+"&per_page=10",success:function(e){if(null==t.options.q||null==t.options.q)0==e.length?(document.getElementById("issue-list").innerHTML="There are no articles under this label yet.",$(".footer").css("position","absolute")):n.addItem(e);else{0==e.items.length?window.location.href="404.html":n.addItem(e.items);var i,s=document.getElementById("issue-list").innerHTML;i=""!=t.options.q?s.replaceAll(t.options.q,'<font style="background-color:yellow;">'+t.options.q+"</font>"):s,document.getElementById("issue-list").innerHTML=i}}})},init:function(){if(null!=e.filter.creator&&null!=e.filter.creator)if("all"==e.filter.creator)this.author="",this.creator="";else{var n=new Array;for(var i in n=e.filter.creator.split(","))this.author+="author:"+n[i]+"+",this.creator+="creator="+n[i]+"&"}else this.author="",this.creator="";null!=e.filter.state&&null!=e.filter.state?this.state=e.filter.state:this.state="all",null==t.options.label?null==t.options.q?(this.issue_url="https://api.github.com/repos/"+e.name+"/"+e.repo,this.issue_perpage_url="https://api.github.com/repos/"+e.name+"/"+e.repo+"/issues?"+this.creator+"state="+this.state+"&"):this.search(t.options.q):(this.issue_url="https://api.github.com/repos/"+e.name+"/"+e.repo+"/issues?"+this.creator+"labels="+t.options.label+"&state="+this.state,this.issue_perpage_url="https://api.github.com/repos/"+e.name+"/"+e.repo+"/issues?"+this.creator+"labels="+t.options.label+"&state="+this.state+"&",document.getElementById("title").innerHTML=t.options.label,$.ajax({type:"get",headers:{Accept:"application/vnd.github.symmetra-preview+json"},url:"https://api.github.com/repos/"+e.name+"/"+e.repo+"/labels/"+t.options.label,success:function(e){document.getElementById("instruction").innerHTML=e.description}})),this.page.getNum(this.issue_url),this.show(this.issue_perpage_url),this.getTags()},search:function(t){t=encodeURI(t),this.issue_url="https://api.github.com/search/issues?q="+t+" "+this.author+"in:title,body+repo:"+e.name+"/"+e.repo+"+state:"+this.state,this.issue_perpage_url="https://api.github.com/search/issues?q="+t+" "+this.author+"in:title,body+repo:"+e.name+"/"+e.repo+"+state:"+this.state+"&"}};var l=function(){};l.prototype={getByClass:function(e,t){for(var n=[],i=e.getElementsByTagName("*"),s=0;s<i.length;s++)i[s].className==t&&n.push(i[s]);return n},init:function(){$(".navi-button").click(function(){"matrix(1, 0, 0, 1, 0, 0)"==$(".main").css("transform")&&($(".main").css("transform","translateX(-150px)"),$(".main-navication span").css("opacity","1"),$(".main-navication").css("opacity","1"),$(".main-navication span").css("transform","translateX(-10px)"),$(".navi-button").css("transform","translateX(-150px)"),$(".Totop").css("transform","translateX(-150px)"),$(".search").css("transform","translateX(-150px)"),$(".search-input").css("transform","translateX(-150px)"))}),this.getByClass(document.getElementsByTagName("body")[0],"main")[0].addEventListener("mousedown",function(){"matrix(1, 0, 0, 1, 0, 0)"!=$(".main").css("transform")&&($(".main").css("transform","translateX(0)"),$(".main-navication span").css("opacity","0"),$(".main-navication").css("opacity","0"),$(".main-navication span").css("transform","translateX(-50px)"),$(".navi-button").css("transform","translateX(0px)"),$(".Totop").css("transform","translateX(0px)"),$(".search").css("transform","translateX(0px)"),$(".search-input").css("transform","translateX(0px)"))},!1),$(".Totop").click(function(){$("html,body").animate({scrollTop:"0px"},600)}),$(".search").click(function(){$(".search-input").css("z-index",99),$(".search-input").css("width","300px"),$(".search-input").focus()}),$(".search-input").bind("keypress",function(e){"13"==e.keyCode&&""!=$(".search-input").val()&&(window.location.href="issue_per_label.html?q="+$(".search-input").val())}),window.onscroll=function(){$(document).scrollTop()>=.6*document.documentElement.clientHeight?$(".Totop").css("opacity",1):$(".Totop").css("opacity",0)}}},t.init=function(){t.info=new n,t.info.init(),null!=t.options.id&&null!=t.options.id?(t.content=new o,t.content.init()):(t.content=new a,t.content.init()),t.menu=new Menu,t.menu.show(),t.footer=new Footer,t.footer.show(),t.button=new l,t.button.init()}};$.ajax({type:"get",headers:{Accept:"application/json"},url:"config.json",success:function(e){new gitblog(e).init()}});const navigationDrawer=document.getElementsByTagName("mdui-navigation-drawer")[0],btn=document.getElementsByTagName("mdui-button-icon")[0];var menu=!0;function completeLoading(){"complete"==document.readyState?document.getElementById("loader-wrapper").style.display="none":document.getElementById("loader-wrapper").style.display="block"}btn.onclick=function(){menu?(navigationDrawer.open=!0,menu=!1):(navigationDrawer.open=!1,menu=!0)},document.onreadystatechange=completeLoading;const height=window.innerWidth;window.onload=function(){height>850&&(navigationDrawer.open=!0)};var CURSOR,alertmessage="本网站内容和域名请勿对站外传播，违者后果自负",once_per_session=1;function get_cookie(e){var t=e+"=",n="";return document.cookie.length>0&&(offset=document.cookie.indexOf(t),-1!=offset&&(offset+=t.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.length),n=unescape(document.cookie.substring(offset,end)))),n}function alertornot(){""==get_cookie("alerted")&&(loadalert(),document.cookie="alerted=yes")}function loadalert(){alert(alertmessage)}0==once_per_session?loadalert():alertornot(),Math.lerp=((e,t,n)=>(1-n)*e+n*t);const getStyle=(e,t)=>{try{return window.getComputedStyle?window.getComputedStyle(e)[t]:e.currentStyle[t]}catch(e){}return""};class Cursor{constructor(){this.pos={curr:null,prev:null},this.pt=[],this.create(),this.init(),this.render()}move(e,t){this.cursor.style.left=`${e}px`,this.cursor.style.top=`${t}px`}create(){this.cursor||(this.cursor=document.createElement("div"),this.cursor.id="cursor",this.cursor.classList.add("hidden"),document.body.append(this.cursor));var e=document.getElementsByTagName("*");for(let t=0;t<e.length;t++)"cursor"==getStyle(e[t],"cursor")&&this.pt.push(e[t].outerHTML);document.body.appendChild(this.scr=document.createElement("style")),this.scr.innerHTML="* {cursor: url(\"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8' width='8px' height='8px'><circle cx='4' cy='4' r='4' opacity='.5'/></svg>\") 4 4, auto !important}"}init(){document.onmousemove=(e=>{null==this.pos.curr&&this.move(e.clientX-8,e.clientY-8),this.pos.curr={x:e.clientX-8,y:e.clientY-8},this.cursor.classList.remove("hidden")})}render(){this.pos.prev?(this.pos.prev.x=Math.lerp(this.pos.prev.x,this.pos.curr.x,.15),this.pos.prev.y=Math.lerp(this.pos.prev.y,this.pos.curr.y,.15),this.move(this.pos.prev.x,this.pos.prev.y)):this.pos.prev=this.pos.curr,requestAnimationFrame(()=>this.render())}}CURSOR=new Cursor;const body=document.querySelector("html"),element=document.getElementById("cursor"),element2=document.getElementById("pointer"),halfAlementWidth=element.offsetWidth/2,halfAlementWidth2=element2.offsetWidth/2;let isHovering=!1;function setPosition(e,t){window.requestAnimationFrame(function(){element.style.transform=`translate(${e-halfAlementWidth}px, ${t-halfAlementWidth}px)`,isHovering||(element2.style.transform=`translate(${e-halfAlementWidth2}px, ${t-halfAlementWidth2}px)`)})}window.addEventListener("mouseover",e=>{const t=e.target;if(t.classList.contains("highlight")){isHovering=!0;const e=t.getBoundingClientRect(),n=window.getComputedStyle(t);element2.style.width=`${e.width+20}px`,element2.style.height=`${e.height+20}px`,element2.style.borderRadius=`${n.borderRadius}`,element2.style.transform=`translate(${e.left-10}px, ${e.top-10}px)`}}),window.addEventListener("mouseout",e=>{e.target.classList.contains("highlight")&&(isHovering=!1,element2.style.width="42px",element2.style.height="42px",element2.style.borderRadius="50%")}),body.addEventListener("mousemove",e=>{window.requestAnimationFrame(function(){setPosition(e.clientX,e.clientY)})});